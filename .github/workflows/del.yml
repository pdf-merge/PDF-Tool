name: ⛔ Delete ALL Workflow Runs

# Tên workflow được thay đổi để nhấn mạnh tính nguy hiểm



on:

  workflow_dispatch: # Vẫn giữ để bạn có thể chạy thủ công



jobs:

  delete-all-runs:

    runs-on: ubuntu-latest

    permissions:

      actions: write

      contents: read # Mặc dù không cần 'contents: read' cho action này, giữ lại cũng không sao

    steps:

      - name: Delete ALL workflow runs

        uses: Mattraks/delete-workflow-runs@v2

        with:

          token: ${{ github.token }}

          repository: ${{ github.repository }}

          

          # --- Đây là các thay đổi quan trọng ---

          

          # 1. Giữ lại 0 ngày (xoá tất cả, bất kể tuổi)

          retain_days: 0

          

          # 2. Giữ lại 0 lần chạy (không giữ lại bất kỳ lần chạy tối thiểu nào)

          keep_minimum_runs: 0

          

          # 3. Bỏ qua tất cả các bộ lọc (để áp dụng cho MỌI workflow, MỌI trạng thái)

          # delete_workflow_pattern: (Bỏ trống)

          # delete_workflow_by_state_pattern: (Bỏ trống - action sẽ mặc định là 'ALL')

          # delete_run_by_conclusion_pattern: (Bỏ trống - action sẽ mặc định là 'ALL')

          

          # 4. Đặt là 'false' để THỰC SỰ XOÁ

          dry_run: true
